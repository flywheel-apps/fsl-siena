{
  "name": "fsl-siena",
  "label": "FSL: SIENA - Longitudinal analysis of brain change",
  "description": "Siena estimates percentage brain volume change (PBVC) betweem two input images, taken of the same subject, at different points in time. It calls a series of FSL programs to strip the non-brain tissue from the two images, register the two brains (under the constraint that the skulls are used to hold the scaling constant during the registration) and analyse the brain change between the two time points. As implemented in this Gear Siena allows for analysis of 14 subcortical regions as well as the Brain-Stem/4th Ventricle (with VENT option). Inputs should be structural images (T1-weighted, T2-weighted, PD, etc) where the in-plane resolution is better than 2mm (ideally 1mm). Outputs consist of an archive containing the results of the analysis, as well as an HTML report summarizing the analysis findings. This Gear also provides the option of using optiBET for brain extraction.",
  "author": "Analysis Group, FMRIB, Oxford, UK.",
  "maintainer": "Flywheel <support@flywheel.io>",
  "license": "Apache-2.0",
  "url": "https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/SIENA",
  "source": "https://github.com/flywheel-apps/fsl-siena",
  "cite": "S.M. Smith, Y. Zhang, M. Jenkinson, J. Chen, P.M. Matthews, A. Federico, and N. De Stefano. Accurate, robust and automated longitudinal and cross-sectional brain change analysis. NeuroImage, 17(1):479-489, 2002.  S.M. Smith, M. Jenkinson, M.W. Woolrich, C.F. Beckmann, T.E.J. Behrens, H. Johansen-Berg, P.R. Bannister, M. De Luca, I. Drobnjak, D.E. Flitney, R. Niazy, J. Saunders, J. Vickers, Y. Zhang, N. De Stefano, J.M. Brady, and P.M. Matthews. Advances in functional and structural MR image analysis and implementation as FSL. NeuroImage, 23(S1):208-219, 2004. If using optiBET option, cite: Lutkenhoff ES, Rosenberg M, Chiang J, Zhang K, Pickard JD, Owen AM, Monti MM. (2014) Optimized Brain Extraction for Pathological Brains (optiBET). PLoS ONE 9(12): e115551. doi:10.1371/journal.pone.0115551",
  "version": "1.0.0_5.0_optibet",
  "custom": {
    "flywheel": {
      "suite": "FSL"
    },
    "gear-builder": {
      "category": "analysis",
      "image": "flywheel/fsl-siena:1.1.0_5.0_optibet"
    }
  },
  "inputs": {
    "key": {
      "base": "api-key"
    },
    "NIFTI_1": {
      "base": "file",
      "optional": false,
      "description": "Structural NIfTI file to be processed. Note that the default behavior of SIENA assumes that the input images are T1w. If you provide a T2w image as input, be sure to set the \"T2\" configuration option == True.",
      "type": {
        "enum": [
          "nifti"
        ]
      }
    },
    "NIFTI_2": {
      "base": "file",
      "optional": false,
      "description": "Structural NIfTI file to be processed. Note that the default behavior of SIENA assumes that the input images are T1w. If you provide a T2w image as input, be sure to set the \"T2\" configuration option == True.",
      "type": {
        "enum": [
          "nifti"
        ]
      }
    },
    "ventricle_mask": {
      "base": "file",
      "optional": true,
      "description": "Optional user-supplied ventricle mask (default is $FSLDIR/bin/MNI152_T1_2mm_VentricleMask)",
      "type": {
        "enum": [
          "nifti"
        ]
      }
    }
  },
  "config": {
    "BET": {
      "default": "",
      "description": "BET options. If you want to change the BET defaults, put BET options here. For example, to increase the size of brain estimation, use: \"-f 0.3\"",
      "id": "-B",
      "type": "string"
    },
    "OPTIBET": {
      "default": false,
      "description": "Use optiBET to perform brain-extractions. This option provides extraction even in patients brains, where extensive pathology may be present (see: https://montilab.psych.ucla.edu/fmri-wiki/optibet/). [default=false]",
      "id": "-d",
      "type": "boolean"
    },
    "BOTTOM": {
      "default": "",
      "description": "number of millimeters to ignore downwards in MNI152/Talairach space [default='']",
      "id": "-b",
      "type": "string"
    },
    "DEBUG": {
      "default": false,
      "description": "debug (don't delete intermediate files) [default=false]",
      "id": "-d",
      "type": "boolean"
    },
    "SEG": {
      "default": false,
      "description": "two-class segmentation (don't segment grey and white matter separately) - use this if there is poor grey/white contrast [default=false]",
      "id": "-2",
      "type": "boolean"
    },
    "SS_BET": {
      "default": false,
      "description": "use standard-space masking as well as BET [default=false]",
      "id": "-m",
      "type": "boolean"
    },
    "S_DIFF": {
      "default": "",
      "description": "command-line options for siena_diff (which estimates change between two aligned images). For example, to tell siena_diff to run FAST segmentation with an increased number of iterations, use -s -i 20",
      "id": "-S",
      "type": "string"
    },
    "T2": {
      "default": false,
      "description": "tell FAST that the input images are T2-weighted and not T1 [default=false]",
      "id": "-t2",
      "type": "boolean"
    },
    "TOP": {
      "default": "",
      "description": "number of millimeters to ignore upwards in MNI152/Talairach space [default='']",
      "id": "-t",
      "type": "string"
    },
    "VENT": {
      "default": false,
      "description": "run ventricle analysis VIENA [default=false]",
      "id": "-V",
      "type": "boolean"
    }
  },
  "environment": {
    "FSLBROWSER": "/etc/alternatives/x-www-browser",
    "FSLDIR": "/usr/share/fsl/5.0",
    "FSLLOCKDIR": "",
    "FSLMACHINELIST": "",
    "FSLMULTIFILEQUIT": "TRUE",
    "FSLOUTPUTTYPE": "NIFTI_GZ",
    "FSLREMOTECALL": "",
    "FSLTCLSH": "/usr/bin/tclsh",
    "FSLWISH": "/usr/bin/wish",
    "LD_LIBRARY_PATH": "/usr/lib/fsl/5.0",
    "PATH": "/usr/lib/fsl/5.0:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
    "POSSUMDIR": "/usr/share/fsl/5.0"
  },
  "command": "python3 run.py"
}
